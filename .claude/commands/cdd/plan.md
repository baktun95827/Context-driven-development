# Action: Generate Intelligent and Battle-Tested Implementation Plan

## OBJECTIVE:

To create a comprehensive, checklist-driven plan by appending it to the existing task file (`$ARGUMENTS`). This plan must be informed not only by the project's vision and laws, but also by its recent, hard-won operational experience.

---

### PRE-PLANNING: MANDATORY CONTEXT LOADING

1.  **Load Foundational Context:** Read `VISION.md` and `CLAUDE.md`.

2.  **Perform Tactical Log Review (CRITICAL ENHANCEMENT):**

    - Scan the `LOG.md` file.
    - Your primary goal is to find and read **ONLY the `## LESSON LEARNED:` sections**. You should pay less attention to the routine `[COMPLETED]` entries to save time and context.
    - This step is crucial for "tactical learning" - avoiding recent, documented mistakes in the upcoming plan.

3.  **Perform Internal Research & Analysis:** (As previously designed)
    - Simulate an internal analysis of the codebase patterns.
    - Formulate any necessary external research URLs.

---

### STEP 2: SYNTHESIZE & STRATEGIZE (ULTRATHINK)

Pause. Synthesize ALL the information you now have:

- The project's **Soul** (`VISION.md`).
- The project's **Laws** (`CLAUDE.md`).
- The project's **Recent Scars & Wisdom** (Lessons from `LOG.md`).
- Your **Internal Analysis** of the codebase.
- The immediate **Task at Hand** (`$ARGUMENTS`).

Based on this complete picture, formulate your implementation strategy.

---

### STEP 3: GENERATE THE PLAN

Now, based on your fully-informed strategy, generate the implementation plan.

- **Format:** A detailed, step-by-step Markdown checklist.
- **Destination:** Append this plan to the task file at `$ARGUMENTS`.
- **CRITICAL:** If your plan's design was directly influenced by a `LESSON LEARNED` from the log, it's good practice to briefly mention it. _Example: "- [ ] Implement error handling using `RepositoryError` wrapper (as per lesson learned on [date])."_

---

### STEP 4: CONFIRMATION

Announce that the battle-tested plan has been appended. Provide a confidence score. State that you are ready for `/cdd:next`.
